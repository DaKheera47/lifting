<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lifting Progression Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <!-- tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #09090b; }
    .card { transition: background-color .2s ease, box-shadow .2s ease; }
    .card:hover { box-shadow: 0 4px 18px -2px rgba(0,0,0,0.55); }
    .chart { width: 100%; }
  </style>
</head>
<body class="text-zinc-200 antialiased">
  <main class="mx-auto max-w-[1700px] px-6 py-6 space-y-8">
    <header class="flex flex-col gap-2">
      <h1 class="text-3xl font-bold tracking-tight">Progression • Overload • Recovery • Balance</h1>
      <p class="text-sm text-zinc-500">Focused dashboard – no fluff. Data last updated: <span id="lastIngested" class="text-zinc-300">...</span></p>
    </header>

    <!-- Filters -->
    <div id="filterBar" class="flex flex-wrap gap-3 items-center bg-zinc-900/60 backdrop-blur rounded-2xl p-4 ring-1 ring-zinc-800">
      <div class="flex gap-1" id="dateRangeButtons"></div>
      <div class="relative" id="exerciseMulti"></div>
      <div class="flex gap-1" id="metricToggle"></div>
    </div>

    <!-- PR Sparklines -->
    <section>
      <h2 class="text-xl font-semibold mb-3">Personal Record Sparklines</h2>
      <div id="sparklineContainer" class="grid gap-4 md:grid-cols-3 lg:grid-cols-5 auto-rows-fr"></div>
    </section>

  <section class="grid gap-6 grid-cols-1 md:grid-cols-12">
      <!-- Progressive Overload -->
      <div class="card col-span-12 bg-zinc-900 rounded-2xl ring-1 ring-zinc-800 shadow-sm p-5 flex flex-col">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-xl font-semibold">Progressive Overload</h2>
          <button id="resetOverloadZoom" class="text-xs px-2 py-1 rounded bg-zinc-800 hover:bg-zinc-700">Reset Zoom</button>
        </div>
  <div id="progressiveOverloadChart" class="chart" style="height:300px" data-fixed-height="true"></div>
        <div id="overloadSlopes" class="mt-3 flex flex-wrap gap-2 text-xs"></div>
      </div>

      <!-- Volume Trend -->
      <div class="card col-span-12 md:col-span-8 bg-zinc-900 rounded-2xl ring-1 ring-zinc-800 shadow-sm p-5 flex flex-col">
        <h2 class="text-xl font-semibold mb-2">Session Volume Trend</h2>
  <div id="volumeTrendChart" class="chart" style="height:240px" data-fixed-height="true"></div>
      </div>

      <!-- Rep Distribution -->
      <div class="card col-span-12 md:col-span-4 bg-zinc-900 rounded-2xl ring-1 ring-zinc-800 shadow-sm p-5 flex flex-col">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-xl font-semibold">Rep Range Distribution</h2>
          <button id="repModeToggle" class="text-xs px-2 py-1 rounded bg-zinc-800 hover:bg-zinc-700" data-mode="weekly">Weekly</button>
        </div>
  <div id="repDistributionChart" class="chart" style="height:240px" data-fixed-height="true"></div>
      </div>

      <!-- Weekly PPL -->
      <div class="card col-span-12 md:col-span-7 bg-zinc-900 rounded-2xl ring-1 ring-zinc-800 shadow-sm p-5 flex flex-col">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-xl font-semibold">Push / Pull / Legs Weekly</h2>
          <button id="pplModeToggle" class="text-xs px-2 py-1 rounded bg-zinc-800 hover:bg-zinc-700" data-mode="absolute">Absolute</button>
        </div>
  <div id="weeklyPPLChart" class="chart" style="height:240px" data-fixed-height="true"></div>
      </div>

      <!-- Muscle Balance 28d -->
      <div class="card col-span-12 md:col-span-5 bg-zinc-900 rounded-2xl ring-1 ring-zinc-800 shadow-sm p-5 flex flex-col">
        <h2 class="text-xl font-semibold mb-2">Muscle Group Balance (28d)</h2>
  <div id="muscleBalanceChart" class="chart" style="height:240px" data-fixed-height="true"></div>
      </div>

      <!-- Recovery -->
      <div class="card col-span-12 bg-zinc-900 rounded-2xl ring-1 ring-zinc-800 shadow-sm p-5 flex flex-col">
        <h2 class="text-xl font-semibold mb-2">Average Recovery Time</h2>
  <div id="recoveryChart" class="chart" style="height:280px" data-fixed-height="true"></div>
      </div>
    </section>
  </main>

  <script src="/static/main.js"></script>
</body>
</html>
